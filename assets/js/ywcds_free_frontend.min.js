jQuery(function(c){var r=function(a,t,n){fragments=n.fragments,cart_hash=n.cart_has,fragments&&c.each(fragments,function(a,t){c(a).addClass("updating")}),c(".shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}}),a.addClass("added"),fragments&&c.each(fragments,function(a,t){c(a).replaceWith(t)}),c(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock(),c(".shop_table.cart").load(t+" .shop_table.cart:eq(0) > *",function(){c(".shop_table.cart").stop(!0).css("opacity","1").unblock(),c("body").trigger("cart_page_refreshed")}),c(".cart_totals").load(t+" .cart_totals:eq(0) > *",function(){c(".cart_totals").stop(!0).css("opacity","1").unblock()})};c(document).on("click",".ywcds_submit_widget.ywcds_ajax_add_donation",function(a){var e,o,t=c(this),n=t.parents("#ywcds_add_donation_form").find(".ywcds_amount").val();return a.preventDefault(),e=t,n={add_donation_to_cart:-1,ywcds_amount:n=n,action:yith_wcds_frontend_l10n.actions.add_donation_to_cart},o=e.parents(".ywcds_form_container"),c.ajax({type:"GET",url:yith_wcds_frontend_l10n.ajax_url,data:n,dataType:"json",beforeSend:function(){o.find(".ajax-loading").css("visibility","visible")},complete:function(){o.find(".ajax-loading").css("visibility","hidden")},success:function(a){var t=(t=window.location.toString()).replace("add-to-cart","added-to-cart"),n=o.find(".ywcds_message");a.fragments?(r(e,t,a),n.removeClass("woocommerce-error"),"undefined"!=typeof ywcds_params&&"undefined"!=typeof ywcds_params.donation_in_cart&&(ywcds_params.donation_in_cart=1),t="",wc_add_to_cart_params.is_cart||0!==e.parent().find(".added_to_cart").size()||(t=' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),n.html(yith_wcds_frontend_l10n.messages.success+t)):(a.result,a=a.message,o.find(".ywcds_amount").css("border","1px solid red"),n.addClass("woocommerce-error"),n.html(a)),n.show()}}),!1}),c(document).on("click",".single_add_to_cart_button",function(a){c(this);var t=c(document).find("#ywcds_add_donation_form_single_product"),n=t.find(".ywcds_amount_single_product"),e=t.data("donation_is_obligatory"),o=t.data("min_donation"),r=t.data("max_donation"),d=c(document).find(".woocommerce-breadcrumb"),s='<div class="woocommerce-error">';if(t.length){c(".woocommerce-error, .woocommerce-message").remove();e=_(n.val(),o,r,e);if("ok"!=e){switch(e){case"nan":s+=yith_wcds_frontend_l10n.messages.no_number+"</div>";break;case"less_zero":s+=yith_wcds_frontend_l10n.messages.negative+"</div>";break;case"empty":s+=yith_wcds_frontend_l10n.messages.obligatory+"</div>";break;case"min":s+=yith_wcds_frontend_l10n.messages.min_don+"</div>";break;case"max":s+=yith_wcds_frontend_l10n.messages.max_don+"</div>"}return d.after(s),c(document).scrollTop(0),a.preventDefault(),!1}}});var _=function(a,t,n,e){var o=new RegExp("[^-0-9%\\"+yith_wcds_frontend_l10n.mon_decimal_point+"]+","gi"),o=a.replace(o,"");if(a!==o)return"nan";if(""==a&&e)return"empty";if(o=o.replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(a=parseFloat(o))<0)return"less_zero";if(""!=a){if(""!=t&&(t=""+t+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),a<(t=parseFloat(t))))return"min";if(""!=n&&(n=""+n+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(n=parseFloat(n))<a))return"max"}return"ok"}});